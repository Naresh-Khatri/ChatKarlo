(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{8041:function(e,t,s){"use strict";s("d924")},"8b24":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"flex-center page bg-grey-10"},[e.hasUsername?s("div",{staticClass:"q-pa-md row justify-center chat-box"},[s("div",{staticStyle:{width:"100%","max-width":"1000px","padding-bottom":"150px"}},[e.messagesData?e._e():s("div",{staticStyle:{"text-align":"center","font-size":"300px",opacity:".5"}},[e._v("\n        ğŸ˜¶\n      ")]),e._l(e.messagesData,(function(t,n){return s("div",{key:n},[s("div",{staticStyle:{color:"white"},style:e.isOwner(t.id)?"text-align:right":"text-align:left"},[e._v("\n          "+e._s(t.name)),e.isOwner(t.id)?s("span",{staticStyle:{color:"lightgreen"}},[e._v("(You)")]):e._e()]),s("chatMessage",{attrs:{text:t.text,sent:e.isOwner(t.id)}})],1)})),e._l(e.typingUsers,(function(t,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:t!=e.storeUsername,expression:"user != storeUsername"}],key:n+t,staticStyle:{color:"white"}},[e._v("\n        "+e._s(t)+"\n        "),s("q-chat-message",[s("q-spinner-dots",{attrs:{size:"3rem",name:"ewf"}})],1)],1)}))],2),s("q-input",{staticClass:"input-field",attrs:{"bg-color":"primary","label-color":"white",color:"white",filled:"",dark:"",standout:"",label:"Write a message"},on:{input:function(t){return e.emitTyping()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendmsg()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-btn",{staticStyle:{color:"black"},attrs:{color:"warning",round:"",icon:"sentiment_satisfied_alt"},on:{click:function(t){e.emojiDialog=!0}}})]},proxy:!0},{key:"append",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send",color:"white",disabled:!e.msgtext},on:{click:function(t){return e.sendmsg()}}})]},proxy:!0},{key:"before",fn:function(){},proxy:!0}]),model:{value:e.msgtext,callback:function(t){e.msgtext=t},expression:"msgtext"}},[s("q-dialog",{model:{value:e.emojiDialog,callback:function(t){e.emojiDialog=t},expression:"emojiDialog"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none"},[s("div",{staticClass:"text-h6"},[e._v("Close icon")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-card-section",{staticClass:"grid-container"},e._l(e.emojis,(function(t,n){return s("q-avatar",{key:n,staticClass:"emoji-icons",on:{click:function(t){return e.sendEmoji(n)}}},[e._v(e._s(t))])})),1)],1)],1)],1)],1):s("div",{staticClass:"q-pa-md"},[s("q-btn",{attrs:{color:"primary"},on:{click:function(t){e.dialog=!0}}},[e._v("start")]),s("q-dialog",{attrs:{persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("div",{staticClass:"dialog-box",staticStyle:{"background-color":"#02d7f2","box-shadow":"none"}},[s("q-card-section",{staticClass:"row items-center"},[s("q-avatar",{staticStyle:{color:"#02d7f2"},attrs:{icon:"account_circle",color:"dark"}}),s("span",{staticClass:"q-ml-sm"},[e._v("Please enter a name to begin.")])],1),s("q-card-section",{staticClass:"row items-center"},[s("q-input",{staticClass:"username-input",attrs:{outlined:"",color:"dark",label:"username",autofocus:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.commitUsername()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"cpfont",attrs:{flat:"",label:"Confirm",color:"dark",disable:!e.username},on:{click:function(t){return e.commitUsername()}}})],1)],1)])],1)])},a=[],i=(s("c975"),s("4360")),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{display:"flex",position:"relative"}},[s("div",{class:e.sent?"sent-text-box":"received-text-box"},[e._v("\n    "+e._s(e.text[0])+"\n  ")])])},r=[],c={props:["text","sent"],data(){return{}}},l=c,m=(s("95fa"),s("2877")),u=Object(m["a"])(l,o,r,!1,null,"2177b626",null),d=u.exports;const p=window.io=s("8e27");var g=p("wss://"+window.location.hostname);g.on("message",(e=>{i["b"].state.messagesData.push(JSON.parse(e))})),g.on("counter",(e=>{i["b"].state.usersCount=e.count})),g.on("typing",(e=>{-1==i["b"].state.typingUsers.indexOf(e.username)&&i["b"].state.typingUsers.push(e.username),setTimeout((()=>{i["b"].state.typingUsers.indexOf(i["b"].state.typingUsers)?i["b"].state.typingUsers.pop(i["b"].state.typingUsers):clearInterval()}),3e3)}));var f={name:"PageIndex",components:{chatMessage:d},data(){return{msgtext:"",dialog:!1,hasUsername:!1,emojiDialog:!1,username:"",onlineCount:0,emojis:["ğŸ˜‚","ğŸ˜­","ğŸ¥º","ğŸ¤£","â¤ï¸","âœ¨","ğŸ˜","ğŸ™","ğŸ˜Š","ğŸ¥°","ğŸ™„","ğŸ¤”","ğŸ”¥","ğŸ¤¤","ğŸ‘Œ"]}},computed:{messagesData(){return i["b"].state.messagesData},typingUsers(){return i["b"].state.typingUsers},storeUsername(){return i["b"].state.username}},mounted(){console.log("stored username = "+localStorage.getItem("username")),localStorage.getItem("username")&&(this.hasUsername=!0,i["b"].state.username=localStorage.getItem("username"),i["b"].state.users.push(this.username))},methods:{isOwner(e){return e==g.id},sendmsg(){if(""==this.msgtext)return void this.$q.notify({type:"negative",message:"input cannot be blank"});let e={name:i["b"].state.username,text:[this.msgtext],stamp:"7 minutes ago",id:g.id,big:!1};g.emit("message",e),this.msgtext=""},sendEmoji(e){let t={name:i["b"].state.username,text:[this.emojis[e]],stamp:"7 minutes ago",id:g.id,big:!0};g.emit("message",t),this.emojiDialog=!1},emitTyping(){g.emit("typing",{username:i["b"].state.username,id:g.id})},commitUsername(){i["b"].state.username=this.username,this.hasUsername=!0,localStorage.setItem("username",this.username),i["b"].state.users.push(this.username)}}},b=f,y=(s("8041"),Object(m["a"])(b,n,a,!1,null,null,null));t["default"]=y.exports},"95fa":function(e,t,s){"use strict";s("9e29")},"9e29":function(e,t,s){},d924:function(e,t,s){}}]);