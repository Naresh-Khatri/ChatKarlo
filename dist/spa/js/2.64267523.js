(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{2451:function(e,s,t){e.exports=t.p+"media/received.6c808b35.wav"},4678:function(e,s,t){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var s=i(e);return t(s)}function i(e){if(!t.o(a,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id="4678"},"4b35":function(e,s,t){},6152:function(e,s,t){"use strict";t("4b35")},8041:function(e,s,t){"use strict";t("d924")},"8b24":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{staticClass:"flex-center page bg-grey-10"},[e.hasUsername?t("div",{staticClass:"q-pa-md row justify-center chat-box",attrs:{id:"chat-box"}},[t("div",{staticStyle:{width:"100%","max-width":"1000px","padding-bottom":"150px"}},[e.messagesData?e._e():t("div",{staticStyle:{"text-align":"center","font-size":"300px",opacity:".5"}},[e._v("\n        ðŸ˜¶\n      ")]),e._l(e.messagesData,(function(s,a){return t("div",{key:a},[t("div",{staticStyle:{color:"white","margin-top":"5px","margin-bottom":"-3px"},style:e.isOwner(s.id)?"text-align:right":"text-align:left"},[e._v("\n          "+e._s(s.name)),e.isOwner(s.id)?t("span",{staticStyle:{color:"lightgreen"}},[e._v("(You)")]):e._e()]),t("chatMessage",{attrs:{text:s.text,sent:e.isOwner(s.id),imgData:s.imgData,big:s.big,stamp:s.stamp}})],1)})),e._l(e.typingUsers,(function(s,a){return t("div",{directives:[{name:"show",rawName:"v-show",value:s!=e.storeUsername,expression:"user != storeUsername"}],key:a+s,staticStyle:{color:"white"}},[e._v("\n        "+e._s(s)+"\n        "),t("q-chat-message",[t("q-spinner-dots",{attrs:{size:"3rem",name:"ewf"}})],1)],1)}))],2),t("q-input",{staticClass:"input-field",attrs:{"bg-color":"primary","label-color":"white",color:"white",filled:"",rounded:"",dark:"",standout:"",label:"Write a message"},on:{input:function(s){return e.emitTyping()},keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.sendmsg()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("q-btn",{staticStyle:{color:"black"},attrs:{color:"warning",round:"",icon:"sentiment_satisfied_alt"},on:{click:function(s){e.emojiDialog=!0}}})]},proxy:!0},{key:"append",fn:function(){return[t("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send",color:"white",disabled:!e.msgtext},on:{click:function(s){return e.sendmsg()}}})]},proxy:!0},{key:"before",fn:function(){},proxy:!0}]),model:{value:e.msgtext,callback:function(s){e.msgtext=s},expression:"msgtext"}},[t("q-dialog",{model:{value:e.emojiDialog,callback:function(s){e.emojiDialog=s},expression:"emojiDialog"}},[t("q-card",[t("q-card-section",{staticClass:"row items-center q-pb-none"},[t("div",{staticClass:"text-h6"},[e._v("Tap to send")]),t("q-space"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),t("q-card-section",{staticClass:"grid-container"},e._l(e.emojis,(function(s,a){return t("q-avatar",{key:a,staticClass:"emoji-icons",on:{click:function(s){return e.sendEmoji(a)}}},[e._v(e._s(s))])})),1)],1)],1),t("label",{attrs:{for:"img-input"}},[t("input",{staticStyle:{display:"none"},attrs:{id:"img-input",type:"file",accept:"image/*"},on:{change:e.sendImage}}),[t("q-avatar",{staticStyle:{"margin-top":"4px"},attrs:{icon:"image"}})]],2)],1)],1):t("div",{staticClass:"q-pa-md"},[t("q-btn",{attrs:{color:"primary"},on:{click:function(s){e.dialog=!0}}},[e._v("start")]),t("q-dialog",{attrs:{persistent:""},model:{value:e.dialog,callback:function(s){e.dialog=s},expression:"dialog"}},[t("div",{staticClass:"dialog-box",staticStyle:{"background-color":"#02d7f2","box-shadow":"none"}},[t("q-card-section",{staticClass:"row items-center"},[t("q-avatar",{staticStyle:{color:"#02d7f2"},attrs:{icon:"account_circle",color:"dark"}}),t("span",{staticClass:"q-ml-sm"},[e._v("Please enter a name to begin.")])],1),t("q-card-section",{staticClass:"row items-center"},[t("q-input",{staticClass:"username-input",attrs:{outlined:"",color:"dark",label:"username",autofocus:""},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.commitUsername()}},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}})],1),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"cpfont",attrs:{flat:"",label:"Confirm",color:"dark",disable:!e.username},on:{click:function(s){return e.commitUsername()}}})],1)],1)])],1)])},n=[],i=(t("c975"),t("e6cf"),t("4360")),o=t("b178"),r=t("4627"),c=(t("bc3a"),t("c1df")),l=t.n(c),d=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticStyle:{display:"flex",position:"relative"}},[t("div",{class:e.imgData&&e.sent?"right":e.imgData&&!e.sent?"":e.sent?"sent-text-box":"received-text-box",staticStyle:{display:"f lex",position:"relat ive"},style:e.big?"font-size:180px":"font-size:25px"},[e.text?t("div",[e._v("\n      "+e._s(e.text)+"\n    ")]):e._e(),e.imgData?t("div",[t("img",{class:e.sent?"right":"left",staticStyle:{"max-width":"85%","border-radius":"20px"},attrs:{src:e.imgData}})]):e._e(),t("div",{class:e.sent?"right":"left",staticStyle:{display:"block","font-size":"12px",color:"white"}},[e._v("\n      "+e._s(e.stamp)+"\n    ")])])])},m=[],b={props:["text","sent","stamp","big","imgData"],data(){return{}}},u=b,f=(t("6152"),t("2877")),j=Object(f["a"])(u,d,m,!1,null,"cfa688cc",null),g=j.exports,p=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-card",[e._v("fdsfds")])},h=[],y={},v=y,k=Object(f["a"])(v,p,h,!1,null,null,null),x=(k.exports,new Audio(t("e791"))),w=new Audio(t("2451"));const _=window.io=t("8e27");var z=_("wss://"+window.location.hostname);function q(){const e=document.getElementById("chat-box");e.scrollTop=e.scrollHeight,console.log(e.scrollHeight)}z.on("message",(e=>{i["b"].state.messagesData.push(JSON.parse(e)),q(),e.id==z.id&&w.play()})),z.on("counter",(e=>{e.count>1&&o["a"].create({type:"positive",message:"A new user joined chat",position:"top"}),i["b"].state.usersCount>e.count&&o["a"].create({type:"negative",message:"A new user left chat",position:"top"}),i["b"].state.usersCount=e.count})),z.on("typing",(e=>{-1==i["b"].state.typingUsers.indexOf(e.username)&&i["b"].state.typingUsers.push(e.username),setTimeout((()=>{i["b"].state.typingUsers.indexOf(i["b"].state.typingUsers)?i["b"].state.typingUsers.pop(i["b"].state.typingUsers):clearInterval()}),3e3)})),z.on("newConnection"),z.on("connect",(()=>{}));var D={name:"PageIndex",components:{chatMessage:g},data(){return{msgtext:"",dialog:!1,hasUsername:!1,emojiDialog:!1,username:"",onlineCount:0,emojis:["ðŸ˜‚","ðŸ˜­","ðŸ¥º","ðŸ¤£","â¤ï¸","âœ¨","ðŸ˜","ðŸ™","ðŸ˜Š","ðŸ¥°","ðŸ™„","ðŸ¤”","ðŸ”¥","ðŸ¤¤","ðŸ‘Œ"]}},computed:{messagesData(){return i["b"].state.messagesData},typingUsers(){return i["b"].state.typingUsers},storeUsername(){return i["b"].state.username}},mounted(){console.log("id = "+z.id),console.log("stored username = "+localStorage.getItem("username")),localStorage.getItem("username")&&(this.hasUsername=!0,i["b"].state.username=localStorage.getItem("username"),i["b"].state.users.push(this.username))},methods:{isOwner(e){return e==z.id},sendmsg(){if(""==this.msgtext)return void this.$q.notify({type:"negative",message:"input cannot be blank"});x.play();let e={name:i["b"].state.username,stamp:l()().format("LT"),id:z.id,big:!1};console.log(i["b"].state.messagesData[-1].id),z.emit("message",e),this.msgtext=""},async sendImage(e){const s={maxSizeMB:1,maxWidthOrHeight:640,useWebWorker:!0};try{console.log(e.target.files[0]);const t=await Object(r["a"])(e.target.files[0],s);console.log("compressedFile instanceof Blob",t instanceof Blob),console.log(`compressedFile size ${t.size/1024/1024} MB`),await this.uploadToServer(t)}catch(t){console.log(t)}},async uploadToServer(e){var s=new FileReader;s.readAsDataURL(e),s.onload=e=>{let t={name:i["b"].state.username,stamp:l()().format("LT"),id:z.id,big:!1,imgData:s.result};z.emit("message",t)}},sendEmoji(e){let s={name:i["b"].state.username,text:[this.emojis[e]],stamp:l()().format("LT"),id:z.id,big:!0};z.emit("message",s),this.emojiDialog=!1},emitTyping(){z.emit("typing",{username:i["b"].state.username,id:z.id})},commitUsername(){i["b"].state.username=this.username,this.hasUsername=!0,localStorage.setItem("username",this.username),i["b"].state.users.push(this.username)}}},S=D,C=(t("8041"),Object(f["a"])(S,a,n,!1,null,null,null));s["default"]=C.exports},d924:function(e,s,t){},e791:function(e,s,t){e.exports=t.p+"media/sent.e48c54c6.wav"}}]);